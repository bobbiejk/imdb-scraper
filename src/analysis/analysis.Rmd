---
title: "Analysis of the popularity of Netflix content"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# make directory
dir.create("../../gen/analysis")
dir.create("../../gen/analysis/output")

# needed packages
require(ggplot2)
require(dplyr)
require(ggfortify)
require(broom)

# loading data for regression
load("../../gen/analysis/input/reviews.RData")

```

# Regression  

## Number of reviews

When regressing review count aggregated weekly on exclusivity, originals, whether the show was releasing at the time of review writing, whether this release has been simultaneous and the time between release date and review writing, it shows that exclusive, original and simultaneous release shows have a positive effect on number of reviews. Moreover, this effect is the highest for original shows. Regarding the time between review writing and release dates captured by duration and its quadratic term, it is found that there is a convex relationship. Hence, this implies that 

```{r}

# variable transformation
reviews_df$quad_dur <- reviews_df$duration * reviews_df$duration
reviews_df$trend <- as.numeric(reviews_df$review_data)
reviews_df$quad_trend <- reviews_df$trend * reviews_df$trend

# regression analysis
reg <- lm(reviews_df$review_count_weekly ~ reviews_df$exclusive + reviews_df$original + reviews_df$releasing + reviews_df$simultaneous + reviews_df$duration + reviews_df$quad_dur + reviews_df$trend + reviews_df$quad_trend, data = reviews_df)

summary(reg)  
```

In order to use OLS for estimation, the model should satisfy the following assumptions: (i) homoskedasticity, (ii) mean independence, (iii) normal distribution of the error term
``` {r}

autoplot(reg)

```